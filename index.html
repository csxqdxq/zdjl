<!doctype html>
<!-- 模板渲染页面 -->
<html lang="Zh-cn">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <script>
        const paramsStr = window.location.search;
        const params = new URLSearchParams(paramsStr);
        const key = params.get('key');
        if(key==null) key="csxqdxq";
        function save(obj) {
            let str = encodeURI(JSON.stringify(obj));
            let base64 = btoa(str);
            localStorage.setItem(key,base64);
        }
    </script>
</head>
<body>
<div id="app">
    <button id="downloadBtn">下载文件</button>

<script>
document.getElementById('downloadBtn').addEventListener('click', function () {
  const content = '这是文件内容'; // 要下载的内容
  const blob = new Blob([content], { type: 'text/plain' }); // 创建一个 Blob 对象
  const link = document.createElement('a'); // 创建一个链接元素
  link.href = URL.createObjectURL(blob); // 将 Blob 对象转为 URL
  link.download = 'example.txt'; // 设置下载的文件名
  link.click(); // 触发点击事件下载文件
});
</script>
</div>
</body>
<script>
    const title = params.get('title');
    const script = params.get('script');
    const style = params.get('style');
    const html = params.get('html');
    console.log(title)
    if(title!=null){
        document.title = title;
    }
    if (style!=null){
        let htmlStyleElement = document.createElement("style");
        htmlStyleElement.innerText = style;
        document.head.appendChild(htmlStyleElement);
    }
    let elementById = document.getElementById("app");
    if (html!=null){
        elementById.innerHTML = html;
    }else {
        //elementById.innerHTML = "没有模板";
    }
    if (script!=null){
        let htmlScriptElement = document.createElement("script");
        htmlScriptElement.innerText = script;
        document.body.appendChild(htmlScriptElement);
    }
</script>
</html>
